{"ast":null,"code":"import axios from 'axios';\nimport { REGISTER_REQUEST, REGISTER_SUCCESS, REGISTER_FAILURE, LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILURE, GET_USER_REQUEST, GET_USER_SUCCESS, GET_USER_FAILURE, LOGOUT } from './ActionType';\nimport api, { API_BASE_URL } from '../../config/apiConfig';\nconst token = localStorage.getItem(\"jwt\");\n// Register action creators\nconst registerRequest = () => ({\n  type: REGISTER_REQUEST\n});\nconst registerSuccess = user => ({\n  type: REGISTER_SUCCESS,\n  payload: user\n});\nconst registerFailure = error => ({\n  type: REGISTER_FAILURE,\n  payload: error\n});\nexport const register = userData => async dispatch => {\n  dispatch(registerRequest());\n  try {\n    const response = await axios.post(`${API_BASE_URL}/auth/signup`, userData);\n    const user = response.data;\n    if (user.jwt) localStorage.setItem(\"jwt\", user.jwt);\n    console.log(\"registerr :\", user);\n    dispatch(registerSuccess(user.jwt));\n  } catch (error) {\n    dispatch(registerFailure(error.message));\n  }\n};\n\n// Login action creators\nconst loginRequest = () => ({\n  type: LOGIN_REQUEST\n});\nconst loginSuccess = user => ({\n  type: LOGIN_SUCCESS,\n  payload: user\n});\nconst loginFailure = error => ({\n  type: LOGIN_FAILURE,\n  payload: error\n});\nexport const login = userData => async dispatch => {\n  dispatch(loginRequest());\n  try {\n    const response = await axios.post(`${API_BASE_URL}/auth/signin`, userData);\n    const user = response.data;\n    if (user.jwt) localStorage.setItem(\"jwt\", user.jwt);\n    // console.log(\"login \",user)\n    dispatch(loginSuccess(user.jwt));\n  } catch (error) {\n    dispatch(loginFailure(error.message));\n  }\n};\nconst getUserRequest = () => ({\n  type: GET_USER_REQUEST\n});\nconst getUserSuccess = user => ({\n  type: GET_USER_SUCCESS,\n  payload: user\n});\nconst getUserFailure = error => ({\n  type: GET_USER_FAILURE,\n  payload: error\n});\n\n//  get user from token\nexport const getUser = () => async dispatch => {\n  dispatch(getUserRequest());\n  try {\n    const response = await axios.get(`${API_BASE_URL}/api/users/profile`, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    const user = response.data;\n    //   if(user.jwt) localStorage.setItem(\"jwt\",user.jwt)\n    //   console.log(\"login \",user)\n    dispatch(getUserSuccess(user));\n  } catch (error) {\n    dispatch(getUserFailure(error.message));\n  }\n};\nexport const logout = () => dispatch => {\n  // return async (dispatch) => {\n  dispatch({\n    type: LOGOUT,\n    payload: null\n  });\n  //   localStorage.clear();\n  // };\n};","map":{"version":3,"names":["axios","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILURE","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","GET_USER_REQUEST","GET_USER_SUCCESS","GET_USER_FAILURE","LOGOUT","api","API_BASE_URL","token","localStorage","getItem","registerRequest","type","registerSuccess","user","payload","registerFailure","error","register","userData","dispatch","response","post","data","jwt","setItem","console","log","message","loginRequest","loginSuccess","loginFailure","login","getUserRequest","getUserSuccess","getUserFailure","getUser","get","headers","logout"],"sources":["/Users/ananthulasaivyshnav/Desktop/stylehive/src/State/Auth/Action.js"],"sourcesContent":["import axios from 'axios';\nimport {\n  REGISTER_REQUEST,\n  REGISTER_SUCCESS,\n  REGISTER_FAILURE,\n  LOGIN_REQUEST,\n  LOGIN_SUCCESS,\n  LOGIN_FAILURE,\n  GET_USER_REQUEST,\n  GET_USER_SUCCESS,\n  GET_USER_FAILURE,\n  LOGOUT\n} from './ActionType';\nimport api, { API_BASE_URL } from '../../config/apiConfig';\n\nconst token=localStorage.getItem(\"jwt\");\n// Register action creators\nconst registerRequest = () => ({ type: REGISTER_REQUEST });\nconst registerSuccess = (user) => ({ type: REGISTER_SUCCESS, payload:user });\nconst registerFailure = error => ({ type: REGISTER_FAILURE, payload: error });\n\nexport const register = userData => async dispatch => {\n  dispatch(registerRequest());\n  try {\n    const response=await axios.post(`${API_BASE_URL}/auth/signup`, userData);\n    const user = response.data;\n    if(user.jwt) localStorage.setItem(\"jwt\",user.jwt)\n    console.log(\"registerr :\",user)\n    dispatch(registerSuccess(user.jwt));\n  } catch (error) {\n    dispatch(registerFailure(error.message));\n  }\n};\n\n// Login action creators\nconst loginRequest = () => ({ type: LOGIN_REQUEST });\nconst loginSuccess = user => ({ type: LOGIN_SUCCESS, payload: user });\nconst loginFailure = error => ({ type: LOGIN_FAILURE, payload: error });\n\nexport const login = userData => async dispatch => {\n  dispatch(loginRequest());\n  try {\n    const response = await axios.post(`${API_BASE_URL}/auth/signin`, userData);\n    const user = response.data;\n    if(user.jwt) localStorage.setItem(\"jwt\",user.jwt)\n    // console.log(\"login \",user)\n    dispatch(loginSuccess(user.jwt));\n  } catch (error) {\n    dispatch(loginFailure(error.message));\n  }\n};\n\nconst getUserRequest = () => ({ type: GET_USER_REQUEST });\nconst getUserSuccess = user => ({ type: GET_USER_SUCCESS, payload: user });\nconst getUserFailure = error => ({ type: GET_USER_FAILURE, payload: error });\n\n//  get user from token\nexport const getUser =()=> async (dispatch) => {\n    dispatch(getUserRequest())\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/users/profile`,{\n      headers:{\n                  \"Authorization\":`Bearer ${token}`\n      }\n    })\n      const user = response.data;\n    //   if(user.jwt) localStorage.setItem(\"jwt\",user.jwt)\n    //   console.log(\"login \",user)\n      dispatch(getUserSuccess(user));\n    } catch (error) {\n      dispatch(getUserFailure(error.message));\n    }\n  };\n\nexport const logout = () => (dispatch)=>{\n    // return async (dispatch) => {\n      dispatch({ type: LOGOUT, payload:null });\n    //   localStorage.clear();\n    // };\n  };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}